Avail
=====

**Method Goals**


|

This method aims to return all the available options for a given date
and itinerary. It does not filter different classes, times or fares. It
will always return all results returned by the provider.

|

**Request Format**

|

The availability request is very straight forward. It only requires
the destination, the traveling dates and the paxes of the rooms.

|

**Response Format**

| 
| Results are organized in this hierarchy:

-  *Hotel* :

|

A list with all the hotels, including the name and code hotel,
*mealplans* list, etc returned by the provider.

-  *Mealplans* :

|

A list of all MealPlans returned by the provider, every *mealplan*
including the mealplan's code. Every *mealplan* also contains a list of
the *options* for this availability.

-  *Options* :

|

A list with all the *options* returned for each mealplan, every
*option* includes the total price, conditions and description each room.
| The price returned should be "all inclusive". All fares, taxes and
discounts are already included in the total price.

|

**Remarks**

| 
| This method **must** be called **before** the *Valuation* method.
| **Price, binding price and commission**:

-  If commission = 0. The price returned is a net price, and the
   provider is informing that the commission **must** be 0.

-  If commission = -1. The provider is not informing if the price is net
   or sale price. This information is informed when signing with the
   provider or with the binding price is true/false)

-  When commission is greater than 0, for example: commission = 12, it
   is a sale price, and this commission is informed for the provider (
   this price is mandatory depends if binding price is true /false).

|

*AvailRQ* Example
-----------------

::

    <AvailRQ>
        <CancellationPolicies>false</CancellationPolicies>
        <AvailDestinations>
            <Destination type = "CTY" code = "5"/>
        </AvailDestinations>
        <StartDate>28/01/2014</StartDate>
        <EndDate>29/01/2014</EndDate>
        <Currency>EUR</Currency>
        <RoomCandidates>
            <RoomCandidate id = "1">
                <Paxes>
                    <Pax age = "30" id = "1"/>
                    <Pax age = "30" id = "2"/>
                </Paxes>
            </RoomCandidate>
        </RoomCandidates>
    </AvailRQ>

|

*AvailRQ* Description
---------------------

+------------------------------------------+----------+-------------+------------------------------------------------------------------+
| Element                                  | Number   | Type        | Description                                                      |
+==========================================+==========+=============+==================================================================+
| AvailRQ                                  | 1        |             | Root node.                                                       |
+------------------------------------------+----------+-------------+------------------------------------------------------------------+
| CancellationPolicies                     | 1        | Boolean     | Indicates if you want to receive the cancellation policies in    |
|                                          |          |             | AvailRS, as long as the provider returns it in this call         |
|                                          |          |             | (see StaticConfiguration).                                       |
+------------------------------------------+----------+-------------+------------------------------------------------------------------+
| AvailDestinations/Destination            | 0..n     |             | Contains the list of destinations filters                        |
|                                          |          |             | (hotels or cities or zones or geocodes).                         |
+------------------------------------------+----------+-------------+------------------------------------------------------------------+
| *@type*                                  | 1        | String      | Destination type ( HOT, CTY, ZON, GEO).                          |
+------------------------------------------+----------+-------------+------------------------------------------------------------------+
| *@code*                                  | 1        | String      | Native destination code as returned by provider in *HotelList*   |
|                                          |          |             | or *AvailDestinationTree*.                                       |
+------------------------------------------+----------+-------------+------------------------------------------------------------------+
| StartDate                                | 1        | String      | Start date to search rates.                                      |
+------------------------------------------+----------+-------------+------------------------------------------------------------------+
| EndDate                                  | 1        | String      | End date to search rates.                                        |
+------------------------------------------+----------+-------------+------------------------------------------------------------------+
| Currency                                 | 1        | String      | Currency value.                                                  |
+------------------------------------------+----------+-------------+------------------------------------------------------------------+
| RoomCandidates/RoomCandidate             | 1..n     |             | Room required.                                                   |
+------------------------------------------+----------+-------------+------------------------------------------------------------------+
| *@id*                                    | 1        | Integer     | Id of the requested room (starting at 1).                        |
+------------------------------------------+----------+-------------+------------------------------------------------------------------+
| RoomCandidates/RoomCandidate/Paxes/Pax   | 1..n     |             | Pax required.                                                    |
+------------------------------------------+----------+-------------+------------------------------------------------------------------+
| *@age*                                   | 1        | Integer     | Passenger age.                                                   |
+------------------------------------------+----------+-------------+------------------------------------------------------------------+
| *@id*                                    | 1        | Integer     | Passenger id (starting at 1).                                    |
+------------------------------------------+----------+-------------+------------------------------------------------------------------+


|

*AvailRS* Example
-----------------

::

   <AvailRS xmlns:xsd = 
   "http://www.w3.org/2001/XMLSchema" xmlns:xsi = 
   "http://www.w3.org/2001/XMLSchema-instance">
     <Hotels>
       <Hotel code = "10" name = "LEO">
         <MealPlans>
           <MealPlan code = "D">
             <Options>
               <Option type = "Hotel" 
               paymentType = "MerchantPay" status = "OK">
                 <Rooms>
                   <Room id = "4582" roomCandidateRefId = "1" 
                   code = "506" description = "Doble Standard..">
                     <Price currency = "EUR" amount = "36.20"
                     binding = "false" commission = "-1"/>
                   </Room>
                 </Rooms>
                 <Price currency = "EUR" amount = "36.20" 
                 binding = "false" commission = "-1"/>
               </Option>
             </Options>
           </MealPlan>
           <MealPlan code = "M">
             <Options>
               <Option type = "Hotel" paymentType = "MerchantPay" status = "OK">
                 <Rooms>
                   <Room id = "4582" roomCandidateRefId = "1" 
                   code = "506" description = "Doble Standard..">
                     <Price currency = "EUR" amount = "42.90" 
                     binding = "false" commission = "-1"/>
                   </Room>
                 </Rooms>
                 <Price currency = "EUR" amount = "42.90" binding = "false" commission = "-1"/>
               </Option>
             </Options>
             ...
           </MealPlan>
           <MealPlan code = "MP">
             <Options>
               <Option type = "HotelSkiPass" paymentType = "MerchantPay" status = "OK">
                 <Rooms>
                   <Room id = "4145" roomCandidateRefId = "1" 
                   code = "DBL#STAND" description = "Doble Standard">
                     <Price currency = "EUR" amount = "636.80" 
                     binding = "false" commission = "-1"/>
                   </Room>
                 </Rooms>
                 <Detail>
                   <POIs>
                     <POI code = "8A" Description = "Andorra">
                       <Services>
                         <Service type = "SkiPass" code = "F1" 
                         description = "Forfait" durationType = "Range" 
                         quantity = "0" unit = "Day">
                           <RangeDates startDate = "28/01/2014" 
                           endDate = "29/01/2014"/>
                         </Service>
                       </Services>
                     </POI>
                   </POIs>
                 </Detail>
                 <Price currency = "EUR" amount = "636.80" 
                 binding = "false" commission = "-1"/>
                 <Parameters>
                   <Parameter key = "sesion" value = "888de014"/>
                 </Parameters>
               </Option>
             </Options>
           </MealPlan>
           ...
         </MealPlans>
       </Hotel>
       ...
     </Hotels>
   </AvailRS>



|

*AvailRS* Description
---------------------

+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Element                                                                         | Number   | Type      | Description                                                                                                                                                                                                       |
+=================================================================================+==========+===========+===================================================================================================================================================================================================================+
| AvailRS/Hotels/Hotel                                                            | 0..n     |           | Root node.                                                                                                                                                                                                        |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| *@code*                                                                         | 1        | String    | Hotel code.                                                                                                                                                                                                       |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| *@name*                                                                         | 0..1     | String    | Hotel name.                                                                                                                                                                                                       |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| MealPlans                                                                       | 1        |           | Meal plans of this hotel.                                                                                                                                                                                         |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| MealPlans/MealPlan                                                              | 1..n     |           | List of meal type classification.                                                                                                                                                                                 |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| *@code*                                                                         | 1        | String    | MealPlan code.                                                                                                                                                                                                    |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| MealPlans/MealPlan/Options                                                      | 1        |           | Options ( list option).                                                                                                                                                                                           |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| MealPlans/MealPlan/Options/Option                                               | 1..n     |           | Detail of option.                                                                                                                                                                                                 |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| *@type*                                                                         | 1        | String    | Indicates the type of option (only hotel, hotel with ski pass, hotel with entrance...).                                                                                                                           |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| *@paymentType*                                                                  | 1        | String    | Indicates the typology of payment (Merchant, Direct ...) .                                                                                                                                                        |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| *@status*                                                                       | 1        | String    | Status option (OK = available, RQ = on request).                                                                                                                                                                  |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| MealPlans/MealPlan/Options/Option/Parameters                                    | 0..1     |           | Additional parameters that must be reported on the ValuationRQ.Parameters, if this option is required                                                                                                             |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| MealPlans/MealPlan/Options/Option/Parameters/Parameter                          | 0..n     |           | Additional parameter that requires the integration                                                                                                                                                                |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| *@key*                                                                          | 1        | String    | Contains the keyword/Id to identify a parameter.                                                                                                                                                                  |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| *@value*                                                                        | 1        | String    | Contains the value of the parameter                                                                                                                                                                               |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| MealPlans/MealPlan/Options/Option/RateRules                                     | 0..1     |           | Restrictions of this option                                                                                                                                                                                       |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| MealPlans/MealPlan/Options/Option/RateRules/Rules                               | 0..1     |           | Rules                                                                                                                                                                                                             |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| MealPlans/MealPlan/Options/Option/RateRules/Rules/Rule                          | 1..n     |           | Rule                                                                                                                                                                                                              |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| *@type*                                                                         | 1        | String    | Values that can take (NonRefundable, Older55, Package)                                                                                                                                                            |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| MealPlans/MealPlan/Options/Option/Rooms                                         | 1        |           | Rooms of this option ( room list).                                                                                                                                                                                |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| MealPlans/MealPlan/Options/Option/Rooms/Room                                    | 1..n     |           | Detail of room.                                                                                                                                                                                                   |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| *@id*                                                                           | 1        | String    | Identifier of the room.                                                                                                                                                                                           |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| *@roomCandidateRefId*                                                           | 1        | Integer   | Identifier of room candidate.                                                                                                                                                                                     |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| *@code*                                                                         | 1        | String    | Room code.                                                                                                                                                                                                        |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| *@description*                                                                  | 1        | String    | Room description.                                                                                                                                                                                                 |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| MealPlans/MealPlan/Options/Option/Rooms/Room/Price                              | 1        |           | Room price.                                                                                                                                                                                                       |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| *@currency*                                                                     | 1        | String    | Currency code.                                                                                                                                                                                                    |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| *@amount*                                                                       | 1        | Decimal   | Room Amount.                                                                                                                                                                                                      |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| *@binding*                                                                      | 1        | Boolean   | Identifies if is the price is binding ( When true the sale price returned **must** not be less than the price informed.                                                                                           |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| *@commission*                                                                   | 1        | Decimal   | Commission ( -1 = not specified (will come indicated with the provider contract ), 0 = net price, X = % of the commission that applies to the amount.                                                             |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| MealPlans/MealPlan/Options/Option/Price                                         | 1        |           | Option price ( it is the total price of option).                                                                                                                                                                  |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| *@currency*                                                                     | 1        | String    | Currency code.                                                                                                                                                                                                    |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| *@amount*                                                                       | 1        | Decimal   | Option Amount.                                                                                                                                                                                                    |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| *@binding*                                                                      | 1        | Boolean   | Identifies if is the price is binding ( When true the sale price returned **must** not be less than the price informed.                                                                                           |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| *@commission*                                                                   | 1        | Decimal   | Commission ( -1 = not specified (will come indicated with the provider contract ), 0 = net price, X = % of the commission that applies to the amount.                                                             |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| MealPlans/MealPlan/Options/Option/Detail                                        | 0..1     |           | Detail of option (it is indicated if the option is different from the type<> Hotel).                                                                                                                              |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| MealPlans/MealPlan/Options/Option/Detail/POIs                                   | 1        |           | Points of interest.                                                                                                                                                                                               |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| MealPlans/MealPlan/Options/Option/Detail/POIs/POI                               | 1..n     |           | Point of interest.                                                                                                                                                                                                |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| *@code*                                                                         | 1        | String    | POI code.                                                                                                                                                                                                         |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| *@description*                                                                  | 1        | String    | POI description.                                                                                                                                                                                                  |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| MealPlans/MealPlan/Options/Option/Detail/POIs/POI/Services                      | 1        |           | Services that contains this POI.                                                                                                                                                                                  |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| MealPlans/MealPlan/Options/Option/Detail/POIs/POI/Services/Service              | 1..n     |           | Service detail.                                                                                                                                                                                                   |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| *@type*                                                                         | 1        | String    | Service typification (SkiPass, Lessons, Meals, Equipment, Ticket, Transfers or Gala).                                                                                                                             |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| *@code*                                                                         | 1        | String    | Service code.                                                                                                                                                                                                     |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| *@description*                                                                  | 1        | String    | Service description.                                                                                                                                                                                              |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| *@durationType*                                                                 | 1        | String    | Type of duration (Range= date range specified will come "RangeDates" element, Open= indicates a duration not restricted by date, quantity and typology of the elements are indicated in "quantity" and "unit").   |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| *@quantity*                                                                     | 1        | Integer   | Indicate the quantity of field in the element "unit".                                                                                                                                                             |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| *@unit*                                                                         | 0..1     | String    | Day or Hour.                                                                                                                                                                                                      |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| MealPlans/MealPlan/Options/Option/Detail/POIs/POI/Services/Service/RangeDates   | 0..1     |           | Service date range (Only specified if durationType=Range).                                                                                                                                                        |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| *@startDate*                                                                    | 1        | String    | Start date to service.                                                                                                                                                                                            |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| *@endDate*                                                                      | 1        | String    | End date to service.                                                                                                                                                                                              |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| MealPlans/MealPlan/Options/Option/Parameters                                    | 0..1     |           | Parameters for additional information.                                                                                                                                                                            |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| MealPlans/MealPlan/Options/Option/Parameters/Parameter                          | 1..n     |           | List of parameter.                                                                                                                                                                                                |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| *@key*                                                                          | 1        | String    | Contains the keyword/Id to identify a parameter.                                                                                                                                                                  |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| *@value*                                                                        | 1        | String    | Contains the value of the parameter                                                                                                                                                                               |
+---------------------------------------------------------------------------------+----------+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

|

Detailled description 
---------------------

|

**PaymentOptions:**


* **MerchantPay:** The costumer pays the client and the client will pay de provider.

|

* **LaterPay:** The costumer will have to use a credit-card as a guaranty for the hotel and the 
payment will be done by the costumer at checking.

|

* **CardBookingPay:** The client will create a virtual credit-card with the exact amount of the 
option so he can pay the provider/hotel. The provider will charge the payment on the reservation day.

|

* **CardChekingPay:** The client will create a virtual credit-card with the exact amount of the 
option so he can pay the provider/hotel. The provider will charge the payment on the checking day.

|


**Rate conditions:**

* The extra fee for a **nonRefundable** cancellation is a 100% since the moment of the creation of the reservation.

* If the solicited distribution is with a pax older than 55 years old, and there is no pax older than **55 years**, then it can't do a confirmation of the options where it would return the condition of the rate. In any case, the provider doesn't return these options.
 
* In the case of pax older of **60 years** and **65 years** you will find the same process like with 55 years old.
 
* The rate **package** means that the product can't be sold by it self
 
* The rate **CanaryResident** is a rate that is applied for the resident in the Canary islands
 
* The rate **BalearicResident** is like CanaryResdient but applied with the Balearic island.
 
|
 
**Room quantity:**
 
<RoomCandidate "cantidad=“1” id=“1">
  
The quantity ( or "cantidad" ) as to be one. This quantity is obsolete.
  
|
